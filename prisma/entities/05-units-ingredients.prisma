/// ========== UNITS & INGREDIENTS ==========
model Unit {
  id           Int    @id @default(autoincrement())
  name         String @unique
  abbreviation String @unique

  ingredients      Ingredient[]
  placeStocks      PlaceStock[]
  goodsReceiptItems GoodsReceiptItem[]

  @@map("units")
}

model Ingredient {
  id    Int     @id @default(autoincrement())
  name  String
  unitId Int    @map("unit_id")

  unit               Unit              @relation(fields: [unitId], references: [id], onDelete: Restrict)
  recipes            Recipe[]
  placeStocks        PlaceStock[]
  supplierProducts   SupplierProduct[]
  ingredientPackages IngredientPackage[]
  stockTransfers     StockTransfer[]
  wastes             Waste[]
  inventoryStockDaily InventoryStockDaily[]

  @@map("ingredients")
}

model Recipe {
  id           Int     @id @default(autoincrement())
  menuId       Int     @map("menu_id")
  ingredientId Int     @map("ingredient_id")
  qty          Decimal @db.Decimal(12, 2)

  menu       Menu       @relation(fields: [menuId], references: [id], onDelete: Cascade)
  ingredient Ingredient @relation(fields: [ingredientId], references: [id], onDelete: Restrict)

  @@unique([menuId, ingredientId])
  @@map("recipes")
}

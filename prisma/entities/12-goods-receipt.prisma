/// ========== GOODS RECEIPT ==========
model GoodsReceipt {
  id             Int      @id @default(autoincrement())
  purchaseOrderId Int     @map("purchase_order_id")
  receivedBy     Int?     @map("received_by")
  receivedAt     DateTime @default(now()) @map("received_at")
  note           String?

  purchaseOrder PurchaseOrder @relation(fields: [purchaseOrderId], references: [id], onDelete: Cascade)
  receivedUser  User?         @relation("UserGoodsReceipts", fields: [receivedBy], references: [id], onDelete: SetNull)
  items         GoodsReceiptItem[]

  @@map("goods_receipts")
}

model GoodsReceiptItem {
  id                 Int     @id @default(autoincrement())
  goodsReceiptId     Int     @map("goods_receipt_id")
  ingredientPackageId Int    @map("ingredient_package_id")
  qtyReceived        Decimal @db.Decimal(12, 2) @map("qty_received")
  qtyDamaged         Decimal @db.Decimal(12, 2) @default(0) @map("qty_damaged")
  unitPrice          Decimal @db.Decimal(12, 2) @map("unit_price")
  remarks            String?

  goodsReceipt     GoodsReceipt     @relation(fields: [goodsReceiptId], references: [id], onDelete: Cascade)
  ingredientPackage IngredientPackage @relation(fields: [ingredientPackageId], references: [id], onDelete: Restrict)

  @@map("goods_receipt_items")
}

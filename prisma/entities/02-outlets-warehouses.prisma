/// ========== OUTLETS & WAREHOUSES ==========
model Outlet {
  id        Int     @id @default(autoincrement())
  name      String
  address   String?
  phone     String?
  isActive  Boolean @default(true) @map("is_active")

  // relations
  userRoles          UserRole[]
  cashierShifts      CashierShift[]
  menus              Menu[]
  tables             Table[]
  outletIngredients  OutletIngredient[]
  transactions       Transaction[] @relation("OutletTransactions")
  promotions         Promotion[]
  purchaseOrders     PurchaseOrder[]
  reportFiles        ReportFile[]
  deliveryIntegrations DeliveryIntegration[]
  stockAdjustments   StockAdjustment[]
  stockTransfersFrom StockTransfer[] @relation("StockTransferFrom")
  stockTransfersTo   StockTransfer[] @relation("StockTransferTo")
  wastes             Waste[]

  @@map("outlets")
}

model Warehouse {
  id       Int     @id @default(autoincrement())
  name     String
  type     String?
  isActive Boolean @default(true) @map("is_active")

  warehouseStocks WarehouseStock[]

  @@map("warehouses")
}

model WarehouseStock {
  id           Int     @id @default(autoincrement())
  warehouseId  Int     @map("warehouse_id")
  ingredientId Int     @map("ingredient_id")
  qty          Decimal @db.Decimal(12, 2) @default(0)

  warehouse Warehouse @relation(fields: [warehouseId], references: [id], onDelete: Restrict)
  ingredient Ingredient @relation(fields: [ingredientId], references: [id], onDelete: Restrict)

  @@unique([warehouseId, ingredientId])
  @@map("warehouse_stocks")
}
